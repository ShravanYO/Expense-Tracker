:root {
      --bg: #0a0a0c;
      --bg2: #111116;
      --bg3: #18181f;
      --bg4: #1f1f28;
      --border: rgba(255,255,255,0.07);
      --border-hover: rgba(255,255,255,0.15);
      --gold: #c9a84c;
      --gold-dim: rgba(201,168,76,0.15);
      --gold-glow: rgba(201,168,76,0.3);
      --text: #e8e6e0;
      --text-dim: rgba(232,230,224,0.5);
      --text-faint: rgba(232,230,224,0.25);
      --red: #e05c5c;
      --red-dim: rgba(224,92,92,0.12);
      --green: #5cba8a;
      --green-dim: rgba(92,186,138,0.12);
      --purple: #9b7ee8;
      --blue: #5c9de0;
      --orange: #e0935c;
      --teal: #5cb8ba;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Syne', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* grain overlay */
    body::before {
      content:'';
      position:fixed; inset:0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events:none; z-index:9999; opacity:0.4;
    }

    /* AUTH SCREEN */
    #auth-screen {
      display:flex; align-items:center; justify-content:center;
      min-height:100vh;
      background: radial-gradient(ellipse at 50% 0%, rgba(201,168,76,0.08) 0%, transparent 60%);
    }

    .auth-box {
      width: 420px;
      padding: 48px;
      background: var(--bg2);
      border: 1px solid var(--border);
      position: relative;
      animation: fadeUp 0.6s ease both;
    }

    .auth-box::before {
      content:'';
      position:absolute; top:0; left:0; right:0;
      height:1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    .auth-logo {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2.2rem;
      font-weight: 300;
      letter-spacing: 0.12em;
      color: var(--gold);
      margin-bottom: 4px;
    }

    .auth-tagline {
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      color: var(--text-dim);
      text-transform: uppercase;
      margin-bottom: 40px;
    }

    .auth-tabs {
      display:flex; gap:0; margin-bottom: 32px;
      border-bottom: 1px solid var(--border);
    }

    .auth-tab {
      flex:1; padding: 10px 0; background: none; border: none;
      color: var(--text-dim); cursor: pointer;
      font-family: 'Syne', sans-serif;
      font-size: 0.75rem; letter-spacing: 0.15em; text-transform: uppercase;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
    }

    .auth-tab.active {
      color: var(--gold);
      border-bottom-color: var(--gold);
    }

    .auth-form { display:flex; flex-direction:column; gap:16px; }

    .field-label {
      font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
      color: var(--text-dim); margin-bottom: 6px;
    }

    .field-input {
      width:100%; padding: 12px 16px;
      background: var(--bg3); border: 1px solid var(--border);
      color: var(--text); font-family: 'DM Mono', monospace; font-size: 0.85rem;
      outline: none; transition: border 0.2s;
    }

    .field-input:focus { border-color: var(--gold); }

    .btn-primary {
      padding: 14px; background: var(--gold); border: none;
      color: #0a0a0c; font-family: 'Syne', sans-serif;
      font-size: 0.75rem; letter-spacing: 0.2em; text-transform: uppercase;
      cursor: pointer; font-weight: 600; transition: all 0.2s; margin-top: 8px;
    }

    .btn-primary:hover { background: #e0bc68; transform: translateY(-1px); }

    .auth-error {
      color: var(--red); font-size: 0.75rem; letter-spacing: 0.05em;
      margin-top: -8px; display:none;
    }

    /* MAIN APP */
    #app { display:none; min-height:100vh; }

    .topbar {
      display:flex; align-items:center; justify-content:space-between;
      padding: 20px 40px;
      border-bottom: 1px solid var(--border);
      background: var(--bg2);
      position: sticky; top:0; z-index:100;
    }

    .logo {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.5rem; font-weight: 300;
      letter-spacing: 0.12em; color: var(--gold);
    }

    .topbar-right { display:flex; align-items:center; gap:24px; }

    .user-pill {
      display:flex; align-items:center; gap:10px;
      padding: 8px 16px;
      background: var(--bg3); border: 1px solid var(--border);
      font-size: 0.75rem; letter-spacing: 0.1em;
    }

    .user-avatar {
      width:26px; height:26px; background: var(--gold-dim);
      border: 1px solid var(--gold);
      display:flex; align-items:center; justify-content:center;
      font-size: 0.65rem; color: var(--gold); font-weight:700;
    }

    .btn-ghost {
      background: none; border: 1px solid var(--border);
      color: var(--text-dim); padding: 8px 16px;
      font-family: 'Syne', sans-serif; font-size: 0.7rem;
      letter-spacing: 0.15em; text-transform: uppercase;
      cursor: pointer; transition: all 0.2s;
    }

    .btn-ghost:hover { border-color: var(--border-hover); color: var(--text); }

    .main-content {
      padding: 40px;
      max-width: 1400px; margin: 0 auto;
    }

    /* MONTH NAV */
    .month-nav {
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom: 36px;
    }

    .month-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem; font-weight: 300; letter-spacing: 0.08em;
    }

    .month-controls { display:flex; gap:8px; }

    .btn-icon {
      width:36px; height:36px; background: var(--bg3);
      border: 1px solid var(--border); color: var(--text-dim);
      cursor:pointer; display:flex; align-items:center; justify-content:center;
      font-size: 1rem; transition: all 0.2s;
    }

    .btn-icon:hover { border-color: var(--gold); color: var(--gold); }

    /* SUMMARY CARDS */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 36px;
    }

    .summary-card {
      padding: 24px;
      background: var(--bg2);
      border: 1px solid var(--border);
      position: relative; overflow: hidden;
      animation: fadeUp 0.5s ease both;
    }

    .summary-card::after {
      content:'';
      position:absolute; bottom:0; left:0; right:0;
      height:2px;
    }

    .summary-card.total::after { background: var(--gold); }
    .summary-card.income::after { background: var(--green); }
    .summary-card.spent::after { background: var(--red); }
    .summary-card.budget::after { background: var(--purple); }

    .card-label {
      font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
      color: var(--text-dim); margin-bottom: 12px;
    }

    .card-value {
      font-family: 'Cormorant Garamond', serif;
      font-size: 2rem; font-weight: 400;
      letter-spacing: 0.04em;
    }

    .card-value.gold { color: var(--gold); }
    .card-value.green { color: var(--green); }
    .card-value.red { color: var(--red); }
    .card-value.purple { color: var(--purple); }

    .card-sub {
      font-size: 0.7rem; color: var(--text-faint);
      margin-top: 6px; font-family: 'DM Mono', monospace;
    }

    /* BUDGET BAR */
    .budget-bar-wrap { margin-top: 10px; }
    .budget-bar-track {
      height:3px; background: var(--bg4);
      border-radius:2px; overflow:hidden;
    }
    .budget-bar-fill {
      height:100%; border-radius:2px;
      transition: width 0.6s ease;
      background: var(--purple);
    }
    .budget-bar-fill.warn { background: var(--orange); }
    .budget-bar-fill.over { background: var(--red); }

    /* GRID: Chart + Form */
    .mid-grid {
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 20px;
      margin-bottom: 36px;
    }

    .panel {
      background: var(--bg2);
      border: 1px solid var(--border);
      padding: 28px;
      animation: fadeUp 0.6s ease both;
    }

    .panel-title {
      font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
      color: var(--text-dim); margin-bottom: 24px;
      padding-bottom: 16px; border-bottom: 1px solid var(--border);
    }

    /* CHART */
    .chart-tabs {
      display:flex; gap:8px; margin-bottom:20px;
    }

    .chart-tab {
      padding: 6px 14px; background: none;
      border: 1px solid var(--border); color: var(--text-dim);
      font-family: 'Syne', sans-serif; font-size: 0.65rem;
      letter-spacing: 0.15em; text-transform: uppercase;
      cursor: pointer; transition: all 0.2s;
    }

    .chart-tab.active {
      border-color: var(--gold); color: var(--gold);
      background: var(--gold-dim);
    }

    .chart-container { position: relative; height: 260px; }

    /* ADD EXPENSE FORM */
    .form-grid { display:flex; flex-direction:column; gap:14px; }

    .form-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }

    .field { display:flex; flex-direction:column; }

    select.field-input {
      appearance:none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='rgba(232,230,224,0.3)'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      cursor: pointer;
    }

    select.field-input option { background: var(--bg3); }

    .type-toggle {
      display:grid; grid-template-columns:1fr 1fr;
    }

    .type-btn {
      padding: 11px; background: var(--bg3);
      border: 1px solid var(--border); color: var(--text-dim);
      font-family:'Syne', sans-serif; font-size:0.7rem;
      letter-spacing:0.12em; text-transform:uppercase;
      cursor:pointer; transition: all 0.2s;
    }

    .type-btn.active-expense {
      background: var(--red-dim); border-color: var(--red); color: var(--red);
    }

    .type-btn.active-income {
      background: var(--green-dim); border-color: var(--green); color: var(--green);
    }

    /* EXPENSE LIST */
    .list-panel {
      background: var(--bg2);
      border: 1px solid var(--border);
      animation: fadeUp 0.7s ease both;
    }

    .list-header {
      padding: 24px 28px;
      border-bottom: 1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between;
    }

    .list-filters { display:flex; gap:8px; }

    .filter-btn {
      padding: 6px 12px;
      background: none; border: 1px solid var(--border);
      color: var(--text-dim); font-family:'Syne',sans-serif;
      font-size:0.62rem; letter-spacing:0.15em; text-transform:uppercase;
      cursor:pointer; transition:all 0.2s;
    }

    .filter-btn.active, .filter-btn:hover {
      border-color: var(--gold-glow); color: var(--gold);
    }

    .expense-list { max-height: 420px; overflow-y:auto; }

    .expense-list::-webkit-scrollbar { width:4px; }
    .expense-list::-webkit-scrollbar-track { background: var(--bg3); }
    .expense-list::-webkit-scrollbar-thumb { background: var(--border-hover); }

    .expense-item {
      display:grid;
      grid-template-columns: 40px 1fr auto auto 36px;
      align-items:center; gap:16px;
      padding: 16px 28px;
      border-bottom: 1px solid var(--border);
      transition: background 0.15s;
      animation: fadeUp 0.3s ease both;
    }

    .expense-item:hover { background: var(--bg3); }

    .expense-icon {
      width:36px; height:36px;
      display:flex; align-items:center; justify-content:center;
      font-size:1rem;
      background: var(--bg3); border: 1px solid var(--border);
    }

    .expense-name {
      font-size: 0.85rem; font-weight:500; margin-bottom:3px;
    }

    .expense-meta {
      font-size: 0.65rem; color: var(--text-dim);
      font-family: 'DM Mono', monospace; letter-spacing:0.05em;
    }

    .cat-badge {
      padding: 3px 10px;
      font-size: 0.6rem; letter-spacing:0.15em; text-transform:uppercase;
      border: 1px solid; font-family:'Syne',sans-serif;
    }

    .expense-amount {
      font-family: 'DM Mono', monospace;
      font-size: 0.95rem; font-weight:500;
      text-align:right; white-space:nowrap;
    }

    .expense-amount.neg { color: var(--red); }
    .expense-amount.pos { color: var(--green); }

    .btn-delete {
      width:28px; height:28px; background: none;
      border: 1px solid transparent; color: var(--text-faint);
      cursor:pointer; display:flex; align-items:center; justify-content:center;
      font-size:0.8rem; transition:all 0.2s;
    }

    .btn-delete:hover { border-color: var(--red); color: var(--red); }

    .empty-state {
      padding: 60px; text-align:center;
      color: var(--text-faint); font-size:0.8rem;
      letter-spacing:0.1em;
    }

    .empty-state .empty-icon { font-size:2.5rem; margin-bottom:16px; opacity:0.3; }

    /* CATEGORY COLORS */
    .cat-food     { border-color: var(--orange); color: var(--orange); }
    .cat-rent     { border-color: var(--purple); color: var(--purple); }
    .cat-transport{ border-color: var(--blue);   color: var(--blue);   }
    .cat-health   { border-color: var(--green);  color: var(--green);  }
    .cat-entertainment { border-color: var(--gold); color: var(--gold); }
    .cat-shopping { border-color: var(--teal);   color: var(--teal);   }
    .cat-income   { border-color: var(--green);  color: var(--green);  }
    .cat-other    { border-color: var(--text-dim); color: var(--text-dim); }

    /* TOAST */
    .toast {
      position:fixed; bottom:30px; right:30px;
      padding:14px 20px; background: var(--bg3);
      border: 1px solid var(--gold); color: var(--text);
      font-size:0.78rem; letter-spacing:0.05em;
      z-index:9998; animation: slideIn 0.3s ease;
      pointer-events:none;
    }

    .toast.error { border-color: var(--red); }

    /* MODAL */
    .modal-overlay {
      display:none; position:fixed; inset:0;
      background: rgba(0,0,0,0.75); z-index:1000;
      align-items:center; justify-content:center;
    }

    .modal-overlay.open { display:flex; }

    .modal {
      width:420px; background: var(--bg2);
      border: 1px solid var(--border); padding:40px;
      position:relative; animation: fadeUp 0.3s ease;
    }

    .modal::before {
      content:'';
      position:absolute; top:0; left:0; right:0; height:1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
    }

    .modal-title {
      font-family:'Cormorant Garamond',serif;
      font-size:1.6rem; font-weight:300; margin-bottom:6px;
    }

    .modal-sub {
      font-size:0.7rem; color:var(--text-dim);
      letter-spacing:0.1em; margin-bottom:28px;
    }

    .btn-close {
      position:absolute; top:16px; right:16px;
      background:none; border:none; color:var(--text-dim);
      font-size:1.2rem; cursor:pointer;
    }

    /* ANIMATIONS */
    @keyframes fadeUp {
      from { opacity:0; transform:translateY(16px); }
      to   { opacity:1; transform:translateY(0); }
    }

    @keyframes slideIn {
      from { opacity:0; transform:translateX(20px); }
      to   { opacity:1; transform:translateX(0); }
    }

    @media(max-width:1100px) {
      .mid-grid { grid-template-columns:1fr; }
      .summary-grid { grid-template-columns:1fr 1fr; }
    }

    @media(max-width:680px) {
      .main-content { padding:20px; }
      .topbar { padding:16px 20px; }
      .summary-grid { grid-template-columns:1fr 1fr; }
    }